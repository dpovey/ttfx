{"version":3,"sources":["../src/index.ts","../src/types.ts","../src/macro.ts"],"sourcesContent":["/**\n * @typemacro/units - Type-Safe Physical Units Library\n *\n * A compile-time unit system inspired by boost::units.\n * Provides type-safe arithmetic operations that verify unit compatibility\n * at compile time.\n *\n * @example\n * ```typescript\n * import { meters, seconds, kilograms, units } from \"@typemacro/units\";\n *\n * const distance = meters(100);\n * const time = seconds(10);\n * const velocity = distance.div(time); // Type: Unit<Velocity>\n *\n * // Compile error: can't add meters and seconds\n * // const invalid = distance.add(time);\n *\n * // Using the units macro:\n * const speed = units`100 km/h`;  // Parsed at compile time\n * ```\n */\n\n// Re-export everything from types\nexport * from \"./types.js\";\n\n// Re-export macro\nexport { unitsMacro, register } from \"./macro.js\";\n\n// ============================================================================\n// Fallback units function for non-macro usage\n// ============================================================================\n\nimport {\n  Unit,\n  Length,\n  Mass,\n  Time,\n  Velocity,\n  Acceleration,\n  Force,\n  Energy,\n  Power,\n  Temperature,\n  Pressure,\n  meters,\n  kilometers,\n  centimeters,\n  millimeters,\n  feet,\n  inches,\n  miles,\n  kilograms,\n  grams,\n  milligrams,\n  pounds,\n  seconds,\n  minutes,\n  hours,\n  days,\n  milliseconds,\n  metersPerSecond,\n  kilometersPerHour,\n  milesPerHour,\n  metersPerSecondSquared,\n  newtons,\n  joules,\n  kilojoules,\n  calories,\n  kilocalories,\n  watts,\n  kilowatts,\n  kelvin,\n  celsius,\n  pascals,\n  kilopascals,\n  atmospheres,\n  DimExp,\n  Dimensions,\n} from \"./types.js\";\n\n// Unit constructor map for runtime fallback\nconst UNIT_CONSTRUCTORS: Record<string, (v: number) => Unit<Dimensions<DimExp, DimExp, DimExp, DimExp, DimExp, DimExp, DimExp>>> = {\n  m: meters,\n  meter: meters,\n  meters: meters,\n  km: kilometers,\n  kilometer: kilometers,\n  kilometers: kilometers,\n  cm: centimeters,\n  centimeter: centimeters,\n  centimeters: centimeters,\n  mm: millimeters,\n  millimeter: millimeters,\n  millimeters: millimeters,\n  ft: feet,\n  foot: feet,\n  feet: feet,\n  in: inches,\n  inch: inches,\n  inches: inches,\n  mi: miles,\n  mile: miles,\n  miles: miles,\n  kg: kilograms,\n  kilogram: kilograms,\n  kilograms: kilograms,\n  g: grams,\n  gram: grams,\n  grams: grams,\n  mg: milligrams,\n  milligram: milligrams,\n  milligrams: milligrams,\n  lb: pounds,\n  lbs: pounds,\n  pound: pounds,\n  pounds: pounds,\n  s: seconds,\n  sec: seconds,\n  second: seconds,\n  seconds: seconds,\n  min: minutes,\n  minute: minutes,\n  minutes: minutes,\n  h: hours,\n  hr: hours,\n  hour: hours,\n  hours: hours,\n  d: days,\n  day: days,\n  days: days,\n  ms: milliseconds,\n  millisecond: milliseconds,\n  milliseconds: milliseconds,\n  \"m/s\": metersPerSecond,\n  \"km/h\": kilometersPerHour,\n  kph: kilometersPerHour,\n  mph: milesPerHour,\n  \"m/s²\": metersPerSecondSquared,\n  \"m/s^2\": metersPerSecondSquared,\n  N: newtons,\n  newton: newtons,\n  newtons: newtons,\n  J: joules,\n  joule: joules,\n  joules: joules,\n  kJ: kilojoules,\n  kilojoule: kilojoules,\n  kilojoules: kilojoules,\n  cal: calories,\n  calorie: calories,\n  calories: calories,\n  kcal: kilocalories,\n  kilocalorie: kilocalories,\n  kilocalories: kilocalories,\n  W: watts,\n  watt: watts,\n  watts: watts,\n  kW: kilowatts,\n  kilowatt: kilowatts,\n  kilowatts: kilowatts,\n  K: kelvin,\n  kelvin: kelvin,\n  \"°C\": celsius,\n  C: celsius,\n  celsius: celsius,\n  Pa: pascals,\n  pascal: pascals,\n  pascals: pascals,\n  kPa: kilopascals,\n  kilopascal: kilopascals,\n  kilopascals: kilopascals,\n  atm: atmospheres,\n  atmosphere: atmospheres,\n  atmospheres: atmospheres,\n};\n\n/**\n * Tagged template function for units - fallback when macro transform isn't applied.\n *\n * @example\n * ```typescript\n * const distance = units`100 meters`;\n * const speed = units`60 km/h`;\n * ```\n */\nexport function units(\n  strings: TemplateStringsArray,\n): Unit<Dimensions<DimExp, DimExp, DimExp, DimExp, DimExp, DimExp, DimExp>> {\n  const text = strings[0].trim();\n  const match = text.match(/^(-?\\d+(?:\\.\\d+)?(?:e[+-]?\\d+)?)\\s*(.+)?$/i);\n\n  if (!match) {\n    throw new Error(`Invalid unit literal: ${text}`);\n  }\n\n  const value = parseFloat(match[1]);\n  const unitStr = match[2]?.trim() || \"\";\n\n  if (!unitStr) {\n    // Return dimensionless\n    return new Unit(value);\n  }\n\n  const constructor = UNIT_CONSTRUCTORS[unitStr];\n  if (!constructor) {\n    throw new Error(`Unknown unit: ${unitStr}`);\n  }\n\n  return constructor(value);\n}\n","/**\n * Type-Safe Units Library\n *\n * A compile-time unit system inspired by boost::units.\n * Uses TypeScript's type system to ensure unit correctness at compile time.\n *\n * The key insight is encoding unit dimensions in the type system:\n * - Mass: M\n * - Length: L\n * - Time: T\n * - etc.\n *\n * Each dimension has an exponent. For example:\n * - Velocity = Length / Time = L^1 * T^-1\n * - Acceleration = Velocity / Time = L^1 * T^-2\n * - Force = Mass * Acceleration = M^1 * L^1 * T^-2\n */\n\n// ============================================================================\n// Dimension Exponent Types (using type-level integers)\n// ============================================================================\n\n// Type-level integers from -5 to 5 (sufficient for most physics)\ntype N5 = { _tag: \"int\"; value: -5 };\ntype N4 = { _tag: \"int\"; value: -4 };\ntype N3 = { _tag: \"int\"; value: -3 };\ntype N2 = { _tag: \"int\"; value: -2 };\ntype N1 = { _tag: \"int\"; value: -1 };\ntype Z0 = { _tag: \"int\"; value: 0 };\ntype P1 = { _tag: \"int\"; value: 1 };\ntype P2 = { _tag: \"int\"; value: 2 };\ntype P3 = { _tag: \"int\"; value: 3 };\ntype P4 = { _tag: \"int\"; value: 4 };\ntype P5 = { _tag: \"int\"; value: 5 };\n\nexport type DimExp = N5 | N4 | N3 | N2 | N1 | Z0 | P1 | P2 | P3 | P4 | P5;\n\n// ============================================================================\n// Dimension Type (SI base units)\n// ============================================================================\n\n/**\n * Represents the dimensions of a physical quantity.\n * Each property is the exponent of that base dimension.\n */\nexport interface Dimensions<\n  M extends DimExp = Z0, // Mass (kg)\n  L extends DimExp = Z0, // Length (m)\n  T extends DimExp = Z0, // Time (s)\n  I extends DimExp = Z0, // Electric current (A)\n  Θ extends DimExp = Z0, // Temperature (K)\n  N extends DimExp = Z0, // Amount of substance (mol)\n  J extends DimExp = Z0, // Luminous intensity (cd)\n> {\n  mass: M;\n  length: L;\n  time: T;\n  current: I;\n  temperature: Θ;\n  amount: N;\n  luminosity: J;\n}\n\n// ============================================================================\n// Dimension Arithmetic (Type-Level)\n// ============================================================================\n\n// Type-level addition map\ntype AddMap = {\n  \"-5\": {\n    \"-5\": N5;\n    \"-4\": N5;\n    \"-3\": N5;\n    \"-2\": N5;\n    \"-1\": N5;\n    \"0\": N5;\n    \"1\": N4;\n    \"2\": N3;\n    \"3\": N2;\n    \"4\": N1;\n    \"5\": Z0;\n  };\n  \"-4\": {\n    \"-5\": N5;\n    \"-4\": N5;\n    \"-3\": N5;\n    \"-2\": N5;\n    \"-1\": N5;\n    \"0\": N4;\n    \"1\": N3;\n    \"2\": N2;\n    \"3\": N1;\n    \"4\": Z0;\n    \"5\": P1;\n  };\n  \"-3\": {\n    \"-5\": N5;\n    \"-4\": N5;\n    \"-3\": N5;\n    \"-2\": N5;\n    \"-1\": N4;\n    \"0\": N3;\n    \"1\": N2;\n    \"2\": N1;\n    \"3\": Z0;\n    \"4\": P1;\n    \"5\": P2;\n  };\n  \"-2\": {\n    \"-5\": N5;\n    \"-4\": N5;\n    \"-3\": N5;\n    \"-2\": N4;\n    \"-1\": N3;\n    \"0\": N2;\n    \"1\": N1;\n    \"2\": Z0;\n    \"3\": P1;\n    \"4\": P2;\n    \"5\": P3;\n  };\n  \"-1\": {\n    \"-5\": N5;\n    \"-4\": N5;\n    \"-3\": N4;\n    \"-2\": N3;\n    \"-1\": N2;\n    \"0\": N1;\n    \"1\": Z0;\n    \"2\": P1;\n    \"3\": P2;\n    \"4\": P3;\n    \"5\": P4;\n  };\n  \"0\": {\n    \"-5\": N5;\n    \"-4\": N4;\n    \"-3\": N3;\n    \"-2\": N2;\n    \"-1\": N1;\n    \"0\": Z0;\n    \"1\": P1;\n    \"2\": P2;\n    \"3\": P3;\n    \"4\": P4;\n    \"5\": P5;\n  };\n  \"1\": {\n    \"-5\": N4;\n    \"-4\": N3;\n    \"-3\": N2;\n    \"-2\": N1;\n    \"-1\": Z0;\n    \"0\": P1;\n    \"1\": P2;\n    \"2\": P3;\n    \"3\": P4;\n    \"4\": P5;\n    \"5\": P5;\n  };\n  \"2\": {\n    \"-5\": N3;\n    \"-4\": N2;\n    \"-3\": N1;\n    \"-2\": Z0;\n    \"-1\": P1;\n    \"0\": P2;\n    \"1\": P3;\n    \"2\": P4;\n    \"3\": P5;\n    \"4\": P5;\n    \"5\": P5;\n  };\n  \"3\": {\n    \"-5\": N2;\n    \"-4\": N1;\n    \"-3\": Z0;\n    \"-2\": P1;\n    \"-1\": P2;\n    \"0\": P3;\n    \"1\": P4;\n    \"2\": P5;\n    \"3\": P5;\n    \"4\": P5;\n    \"5\": P5;\n  };\n  \"4\": {\n    \"-5\": N1;\n    \"-4\": Z0;\n    \"-3\": P1;\n    \"-2\": P2;\n    \"-1\": P3;\n    \"0\": P4;\n    \"1\": P5;\n    \"2\": P5;\n    \"3\": P5;\n    \"4\": P5;\n    \"5\": P5;\n  };\n  \"5\": {\n    \"-5\": Z0;\n    \"-4\": P1;\n    \"-3\": P2;\n    \"-2\": P3;\n    \"-1\": P4;\n    \"0\": P5;\n    \"1\": P5;\n    \"2\": P5;\n    \"3\": P5;\n    \"4\": P5;\n    \"5\": P5;\n  };\n};\n\n// Type-level negation map\ntype NegMap = {\n  \"-5\": P5;\n  \"-4\": P4;\n  \"-3\": P3;\n  \"-2\": P2;\n  \"-1\": P1;\n  \"0\": Z0;\n  \"1\": N1;\n  \"2\": N2;\n  \"3\": N3;\n  \"4\": N4;\n  \"5\": N5;\n};\n\ntype DimToString<D extends DimExp> = `${D[\"value\"]}`;\n\n// Add two dimension exponents\nexport type AddDim<\n  A extends DimExp,\n  B extends DimExp,\n> = AddMap[DimToString<A>][DimToString<B>];\n\n// Negate a dimension exponent\nexport type NegDim<D extends DimExp> = NegMap[DimToString<D>];\n\n// Subtract dimension exponents\nexport type SubDim<A extends DimExp, B extends DimExp> = AddDim<A, NegDim<B>>;\n\n// ============================================================================\n// Dimension Operations (Multiply/Divide units)\n// ============================================================================\n\n/**\n * Multiply two dimensional types (add exponents)\n */\nexport type MulDimensions<\n  D1 extends Dimensions<DimExp, DimExp, DimExp, DimExp, DimExp, DimExp, DimExp>,\n  D2 extends Dimensions<DimExp, DimExp, DimExp, DimExp, DimExp, DimExp, DimExp>,\n> = Dimensions<\n  AddDim<D1[\"mass\"], D2[\"mass\"]>,\n  AddDim<D1[\"length\"], D2[\"length\"]>,\n  AddDim<D1[\"time\"], D2[\"time\"]>,\n  AddDim<D1[\"current\"], D2[\"current\"]>,\n  AddDim<D1[\"temperature\"], D2[\"temperature\"]>,\n  AddDim<D1[\"amount\"], D2[\"amount\"]>,\n  AddDim<D1[\"luminosity\"], D2[\"luminosity\"]>\n>;\n\n/**\n * Divide dimensional types (subtract exponents)\n */\nexport type DivDimensions<\n  D1 extends Dimensions<DimExp, DimExp, DimExp, DimExp, DimExp, DimExp, DimExp>,\n  D2 extends Dimensions<DimExp, DimExp, DimExp, DimExp, DimExp, DimExp, DimExp>,\n> = Dimensions<\n  SubDim<D1[\"mass\"], D2[\"mass\"]>,\n  SubDim<D1[\"length\"], D2[\"length\"]>,\n  SubDim<D1[\"time\"], D2[\"time\"]>,\n  SubDim<D1[\"current\"], D2[\"current\"]>,\n  SubDim<D1[\"temperature\"], D2[\"temperature\"]>,\n  SubDim<D1[\"amount\"], D2[\"amount\"]>,\n  SubDim<D1[\"luminosity\"], D2[\"luminosity\"]>\n>;\n\n// ============================================================================\n// Common Dimension Types\n// ============================================================================\n\nexport type Dimensionless = Dimensions<Z0, Z0, Z0, Z0, Z0, Z0, Z0>;\nexport type Mass = Dimensions<P1, Z0, Z0, Z0, Z0, Z0, Z0>;\nexport type Length = Dimensions<Z0, P1, Z0, Z0, Z0, Z0, Z0>;\nexport type Time = Dimensions<Z0, Z0, P1, Z0, Z0, Z0, Z0>;\nexport type Current = Dimensions<Z0, Z0, Z0, P1, Z0, Z0, Z0>;\nexport type Temperature = Dimensions<Z0, Z0, Z0, Z0, P1, Z0, Z0>;\n\n// Derived dimensions\nexport type Area = Dimensions<Z0, P2, Z0, Z0, Z0, Z0, Z0>; // L^2\nexport type Volume = Dimensions<Z0, P3, Z0, Z0, Z0, Z0, Z0>; // L^3\nexport type Velocity = Dimensions<Z0, P1, N1, Z0, Z0, Z0, Z0>; // L/T\nexport type Acceleration = Dimensions<Z0, P1, N2, Z0, Z0, Z0, Z0>; // L/T^2\nexport type Force = Dimensions<P1, P1, N2, Z0, Z0, Z0, Z0>; // M*L/T^2\nexport type Energy = Dimensions<P1, P2, N2, Z0, Z0, Z0, Z0>; // M*L^2/T^2\nexport type Power = Dimensions<P1, P2, N3, Z0, Z0, Z0, Z0>; // M*L^2/T^3\nexport type Pressure = Dimensions<P1, N1, N2, Z0, Z0, Z0, Z0>; // M/(L*T^2)\nexport type Frequency = Dimensions<Z0, Z0, N1, Z0, Z0, Z0, Z0>; // 1/T\nexport type Voltage = Dimensions<P1, P2, N3, N1, Z0, Z0, Z0>; // M*L^2/(T^3*I)\nexport type Resistance = Dimensions<P1, P2, N3, N2, Z0, Z0, Z0>; // M*L^2/(T^3*I^2)\n\n// ============================================================================\n// Unit Class\n// ============================================================================\n\n/**\n * A quantity with a value and dimensional type.\n * The dimension is encoded in the type system for compile-time checking.\n */\nexport class Unit<\n  D extends Dimensions<DimExp, DimExp, DimExp, DimExp, DimExp, DimExp, DimExp>,\n> {\n  constructor(\n    public readonly value: number,\n    public readonly symbol: string = \"\",\n  ) {}\n\n  /**\n   * Add two quantities with the same dimensions\n   */\n  add(other: Unit<D>): Unit<D> {\n    return new Unit(this.value + other.value, this.symbol);\n  }\n\n  /**\n   * Subtract two quantities with the same dimensions\n   */\n  sub(other: Unit<D>): Unit<D> {\n    return new Unit(this.value - other.value, this.symbol);\n  }\n\n  /**\n   * Multiply by another unit (dimensions add)\n   */\n  mul<\n    D2 extends Dimensions<\n      DimExp,\n      DimExp,\n      DimExp,\n      DimExp,\n      DimExp,\n      DimExp,\n      DimExp\n    >,\n  >(other: Unit<D2>): Unit<MulDimensions<D, D2>> {\n    return new Unit(this.value * other.value);\n  }\n\n  /**\n   * Divide by another unit (dimensions subtract)\n   */\n  div<\n    D2 extends Dimensions<\n      DimExp,\n      DimExp,\n      DimExp,\n      DimExp,\n      DimExp,\n      DimExp,\n      DimExp\n    >,\n  >(other: Unit<D2>): Unit<DivDimensions<D, D2>> {\n    return new Unit(this.value / other.value);\n  }\n\n  /**\n   * Scale by a dimensionless number\n   */\n  scale(factor: number): Unit<D> {\n    return new Unit(this.value * factor, this.symbol);\n  }\n\n  /**\n   * Negate the value\n   */\n  neg(): Unit<D> {\n    return new Unit(-this.value, this.symbol);\n  }\n\n  /**\n   * Check equality with tolerance\n   */\n  equals(other: Unit<D>, tolerance: number = 1e-10): boolean {\n    return Math.abs(this.value - other.value) < tolerance;\n  }\n\n  /**\n   * Format as string\n   */\n  toString(): string {\n    return this.symbol ? `${this.value} ${this.symbol}` : `${this.value}`;\n  }\n}\n\n// ============================================================================\n// Unit Constructors\n// ============================================================================\n\n// Length\nexport const meters = (v: number): Unit<Length> => new Unit(v, \"m\");\nexport const kilometers = (v: number): Unit<Length> => new Unit(v * 1000, \"km\");\nexport const centimeters = (v: number): Unit<Length> => new Unit(v / 100, \"cm\");\nexport const millimeters = (v: number): Unit<Length> =>\n  new Unit(v / 1000, \"mm\");\nexport const feet = (v: number): Unit<Length> => new Unit(v * 0.3048, \"ft\");\nexport const inches = (v: number): Unit<Length> => new Unit(v * 0.0254, \"in\");\nexport const miles = (v: number): Unit<Length> => new Unit(v * 1609.344, \"mi\");\n\n// Mass\nexport const kilograms = (v: number): Unit<Mass> => new Unit(v, \"kg\");\nexport const grams = (v: number): Unit<Mass> => new Unit(v / 1000, \"g\");\nexport const milligrams = (v: number): Unit<Mass> => new Unit(v / 1e6, \"mg\");\nexport const pounds = (v: number): Unit<Mass> => new Unit(v * 0.453592, \"lb\");\n\n// Time\nexport const seconds = (v: number): Unit<Time> => new Unit(v, \"s\");\nexport const minutes = (v: number): Unit<Time> => new Unit(v * 60, \"min\");\nexport const hours = (v: number): Unit<Time> => new Unit(v * 3600, \"h\");\nexport const days = (v: number): Unit<Time> => new Unit(v * 86400, \"d\");\nexport const milliseconds = (v: number): Unit<Time> => new Unit(v / 1000, \"ms\");\n\n// Velocity\nexport const metersPerSecond = (v: number): Unit<Velocity> =>\n  new Unit(v, \"m/s\");\nexport const kilometersPerHour = (v: number): Unit<Velocity> =>\n  new Unit(v / 3.6, \"km/h\");\nexport const milesPerHour = (v: number): Unit<Velocity> =>\n  new Unit(v * 0.44704, \"mph\");\n\n// Acceleration\nexport const metersPerSecondSquared = (v: number): Unit<Acceleration> =>\n  new Unit(v, \"m/s²\");\n\n// Force\nexport const newtons = (v: number): Unit<Force> => new Unit(v, \"N\");\n\n// Energy\nexport const joules = (v: number): Unit<Energy> => new Unit(v, \"J\");\nexport const kilojoules = (v: number): Unit<Energy> => new Unit(v * 1000, \"kJ\");\nexport const calories = (v: number): Unit<Energy> => new Unit(v * 4.184, \"cal\");\nexport const kilocalories = (v: number): Unit<Energy> =>\n  new Unit(v * 4184, \"kcal\");\n\n// Power\nexport const watts = (v: number): Unit<Power> => new Unit(v, \"W\");\nexport const kilowatts = (v: number): Unit<Power> => new Unit(v * 1000, \"kW\");\n\n// Temperature (note: this is temperature difference, not absolute)\nexport const kelvin = (v: number): Unit<Temperature> => new Unit(v, \"K\");\nexport const celsius = (v: number): Unit<Temperature> => new Unit(v, \"°C\");\n\n// Pressure\nexport const pascals = (v: number): Unit<Pressure> => new Unit(v, \"Pa\");\nexport const kilopascals = (v: number): Unit<Pressure> =>\n  new Unit(v * 1000, \"kPa\");\nexport const atmospheres = (v: number): Unit<Pressure> =>\n  new Unit(v * 101325, \"atm\");\n\n// ============================================================================\n// Type Guards and Utilities\n// ============================================================================\n\n/**\n * Check if two units have the same dimensions (compile-time)\n */\nexport type SameDimensions<\n  D1 extends Dimensions<DimExp, DimExp, DimExp, DimExp, DimExp, DimExp, DimExp>,\n  D2 extends Dimensions<DimExp, DimExp, DimExp, DimExp, DimExp, DimExp, DimExp>,\n> = D1 extends D2 ? (D2 extends D1 ? true : false) : false;\n\n/**\n * Assert at compile time that dimensions are equal\n */\nexport function assertSameDimensions<\n  D1 extends Dimensions<DimExp, DimExp, DimExp, DimExp, DimExp, DimExp, DimExp>,\n  D2 extends Dimensions<DimExp, DimExp, DimExp, DimExp, DimExp, DimExp, DimExp>,\n>(_a: Unit<D1>, _b: Unit<D2>): SameDimensions<D1, D2> {\n  return true as SameDimensions<D1, D2>;\n}\n","/**\n * Units Macro - Parse unit literals at compile time\n *\n * Usage:\n *   const distance = units`5 meters`;\n *   const speed = units`100 km/h`;\n *   const force = units`9.8 N`;\n */\n\nimport * as ts from \"typescript\";\nimport { defineExpressionMacro, globalRegistry, MacroContext } from \"@typemacro/core\";\n\n// Map of unit strings to constructor function names\nconst UNIT_MAP: Record<string, { fn: string; factor: number }> = {\n  // Length\n  m: { fn: \"meters\", factor: 1 },\n  meter: { fn: \"meters\", factor: 1 },\n  meters: { fn: \"meters\", factor: 1 },\n  km: { fn: \"kilometers\", factor: 1 },\n  kilometer: { fn: \"kilometers\", factor: 1 },\n  kilometers: { fn: \"kilometers\", factor: 1 },\n  cm: { fn: \"centimeters\", factor: 1 },\n  centimeter: { fn: \"centimeters\", factor: 1 },\n  centimeters: { fn: \"centimeters\", factor: 1 },\n  mm: { fn: \"millimeters\", factor: 1 },\n  millimeter: { fn: \"millimeters\", factor: 1 },\n  millimeters: { fn: \"millimeters\", factor: 1 },\n  ft: { fn: \"feet\", factor: 1 },\n  foot: { fn: \"feet\", factor: 1 },\n  feet: { fn: \"feet\", factor: 1 },\n  in: { fn: \"inches\", factor: 1 },\n  inch: { fn: \"inches\", factor: 1 },\n  inches: { fn: \"inches\", factor: 1 },\n  mi: { fn: \"miles\", factor: 1 },\n  mile: { fn: \"miles\", factor: 1 },\n  miles: { fn: \"miles\", factor: 1 },\n\n  // Mass\n  kg: { fn: \"kilograms\", factor: 1 },\n  kilogram: { fn: \"kilograms\", factor: 1 },\n  kilograms: { fn: \"kilograms\", factor: 1 },\n  g: { fn: \"grams\", factor: 1 },\n  gram: { fn: \"grams\", factor: 1 },\n  grams: { fn: \"grams\", factor: 1 },\n  mg: { fn: \"milligrams\", factor: 1 },\n  milligram: { fn: \"milligrams\", factor: 1 },\n  milligrams: { fn: \"milligrams\", factor: 1 },\n  lb: { fn: \"pounds\", factor: 1 },\n  lbs: { fn: \"pounds\", factor: 1 },\n  pound: { fn: \"pounds\", factor: 1 },\n  pounds: { fn: \"pounds\", factor: 1 },\n\n  // Time\n  s: { fn: \"seconds\", factor: 1 },\n  sec: { fn: \"seconds\", factor: 1 },\n  second: { fn: \"seconds\", factor: 1 },\n  seconds: { fn: \"seconds\", factor: 1 },\n  min: { fn: \"minutes\", factor: 1 },\n  minute: { fn: \"minutes\", factor: 1 },\n  minutes: { fn: \"minutes\", factor: 1 },\n  h: { fn: \"hours\", factor: 1 },\n  hr: { fn: \"hours\", factor: 1 },\n  hour: { fn: \"hours\", factor: 1 },\n  hours: { fn: \"hours\", factor: 1 },\n  d: { fn: \"days\", factor: 1 },\n  day: { fn: \"days\", factor: 1 },\n  days: { fn: \"days\", factor: 1 },\n  ms: { fn: \"milliseconds\", factor: 1 },\n  millisecond: { fn: \"milliseconds\", factor: 1 },\n  milliseconds: { fn: \"milliseconds\", factor: 1 },\n\n  // Velocity\n  \"m/s\": { fn: \"metersPerSecond\", factor: 1 },\n  \"km/h\": { fn: \"kilometersPerHour\", factor: 1 },\n  kph: { fn: \"kilometersPerHour\", factor: 1 },\n  mph: { fn: \"milesPerHour\", factor: 1 },\n\n  // Acceleration\n  \"m/s²\": { fn: \"metersPerSecondSquared\", factor: 1 },\n  \"m/s^2\": { fn: \"metersPerSecondSquared\", factor: 1 },\n\n  // Force\n  N: { fn: \"newtons\", factor: 1 },\n  newton: { fn: \"newtons\", factor: 1 },\n  newtons: { fn: \"newtons\", factor: 1 },\n\n  // Energy\n  J: { fn: \"joules\", factor: 1 },\n  joule: { fn: \"joules\", factor: 1 },\n  joules: { fn: \"joules\", factor: 1 },\n  kJ: { fn: \"kilojoules\", factor: 1 },\n  kilojoule: { fn: \"kilojoules\", factor: 1 },\n  kilojoules: { fn: \"kilojoules\", factor: 1 },\n  cal: { fn: \"calories\", factor: 1 },\n  calorie: { fn: \"calories\", factor: 1 },\n  calories: { fn: \"calories\", factor: 1 },\n  kcal: { fn: \"kilocalories\", factor: 1 },\n  kilocalorie: { fn: \"kilocalories\", factor: 1 },\n  kilocalories: { fn: \"kilocalories\", factor: 1 },\n\n  // Power\n  W: { fn: \"watts\", factor: 1 },\n  watt: { fn: \"watts\", factor: 1 },\n  watts: { fn: \"watts\", factor: 1 },\n  kW: { fn: \"kilowatts\", factor: 1 },\n  kilowatt: { fn: \"kilowatts\", factor: 1 },\n  kilowatts: { fn: \"kilowatts\", factor: 1 },\n\n  // Temperature\n  K: { fn: \"kelvin\", factor: 1 },\n  kelvin: { fn: \"kelvin\", factor: 1 },\n  \"°C\": { fn: \"celsius\", factor: 1 },\n  C: { fn: \"celsius\", factor: 1 },\n  celsius: { fn: \"celsius\", factor: 1 },\n\n  // Pressure\n  Pa: { fn: \"pascals\", factor: 1 },\n  pascal: { fn: \"pascals\", factor: 1 },\n  pascals: { fn: \"pascals\", factor: 1 },\n  kPa: { fn: \"kilopascals\", factor: 1 },\n  kilopascal: { fn: \"kilopascals\", factor: 1 },\n  kilopascals: { fn: \"kilopascals\", factor: 1 },\n  atm: { fn: \"atmospheres\", factor: 1 },\n  atmosphere: { fn: \"atmospheres\", factor: 1 },\n  atmospheres: { fn: \"atmospheres\", factor: 1 },\n};\n\n/**\n * Parse a unit literal string like \"5 meters\" or \"100 km/h\"\n */\nfunction parseUnitLiteral(\n  text: string,\n): { value: number; unit: string } | null {\n  const trimmed = text.trim();\n\n  // Try to match: number followed by optional whitespace and unit\n  const match = trimmed.match(/^(-?\\d+(?:\\.\\d+)?(?:e[+-]?\\d+)?)\\s*(.+)?$/i);\n\n  if (!match) {\n    return null;\n  }\n\n  const value = parseFloat(match[1]);\n  const unit = match[2]?.trim() || \"\";\n\n  return { value, unit };\n}\n\n/**\n * Units tagged template macro\n *\n * units`5 meters` => meters(5)\n * units`100 km/h` => kilometersPerHour(100)\n */\nexport const unitsMacro = defineExpressionMacro({\n  name: \"units\",\n  description: \"Parse unit literals at compile time\",\n\n  expand(\n    ctx: MacroContext,\n    callExpr: ts.CallExpression,\n    args: readonly ts.Expression[],\n  ): ts.Expression {\n    const factory = ctx.factory;\n\n    // Handle tagged template literal\n    if (args.length === 1 && ts.isTemplateLiteral(args[0])) {\n      const template = args[0];\n\n      // Simple case: no substitutions\n      if (ts.isNoSubstitutionTemplateLiteral(template)) {\n        return parseAndCreateUnit(ctx, template.text, callExpr);\n      }\n\n      // Template with substitutions - we need to handle this differently\n      // For now, error on complex templates\n      ctx.reportError(\n        callExpr,\n        \"units template literals with substitutions are not yet supported\",\n      );\n      return callExpr;\n    }\n\n    // Handle direct string argument: units(\"5 meters\")\n    if (args.length === 1 && ts.isStringLiteral(args[0])) {\n      return parseAndCreateUnit(ctx, args[0].text, callExpr);\n    }\n\n    // Handle number + unit string: units(5, \"meters\")\n    if (args.length === 2) {\n      const valueArg = args[0];\n      const unitArg = args[1];\n\n      if (ts.isStringLiteral(unitArg)) {\n        const unitText = unitArg.text.trim();\n        const unitInfo = UNIT_MAP[unitText];\n\n        if (!unitInfo) {\n          ctx.reportError(callExpr, `Unknown unit: ${unitText}`);\n          return callExpr;\n        }\n\n        // Generate: unitFn(value * factor)\n        if (ts.isNumericLiteral(valueArg)) {\n          const value = parseFloat(valueArg.text) * unitInfo.factor;\n          return factory.createCallExpression(\n            factory.createIdentifier(unitInfo.fn),\n            undefined,\n            [factory.createNumericLiteral(value)],\n          );\n        }\n\n        // If value isn't a literal, generate: unitFn(value)\n        return factory.createCallExpression(\n          factory.createIdentifier(unitInfo.fn),\n          undefined,\n          [valueArg],\n        );\n      }\n    }\n\n    ctx.reportError(\n      callExpr,\n      \"Invalid units() call - expected a string literal or tagged template\",\n    );\n    return callExpr;\n  },\n});\n\n/**\n * Helper to parse a unit string and create the appropriate function call\n */\nfunction parseAndCreateUnit(\n  ctx: MacroContext,\n  text: string,\n  errorNode: ts.Node,\n): ts.Expression {\n  const factory = ctx.factory;\n  const parsed = parseUnitLiteral(text);\n\n  if (!parsed) {\n    ctx.reportError(errorNode, `Invalid unit literal: ${text}`);\n    return errorNode as ts.Expression;\n  }\n\n  const { value, unit } = parsed;\n\n  // If no unit specified, just return the number\n  if (!unit) {\n    return factory.createNumericLiteral(value);\n  }\n\n  const unitInfo = UNIT_MAP[unit];\n\n  if (!unitInfo) {\n    ctx.reportError(errorNode, `Unknown unit: ${unit}`);\n    return errorNode as ts.Expression;\n  }\n\n  const finalValue = value * unitInfo.factor;\n\n  return factory.createCallExpression(\n    factory.createIdentifier(unitInfo.fn),\n    undefined,\n    [factory.createNumericLiteral(finalValue)],\n  );\n}\n\n// ============================================================================\n// Register\n// ============================================================================\n\nexport function register(): void {\n  globalRegistry.register(unitsMacro);\n}\n\n// Auto-register\nregister();\n"],"mappings":"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","names":[]}