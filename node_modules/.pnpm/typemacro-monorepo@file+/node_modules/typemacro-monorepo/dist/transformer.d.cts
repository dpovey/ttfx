import * as ts from 'typescript';
import { M as MacroContextImpl } from './context-Di7cnxkh.cjs';

/**
 * typemacro Transformer - Main TypeScript transformer for macro expansion
 *
 * This transformer integrates with ts-patch to process macros during compilation.
 */

/**
 * Configuration for the transformer
 */
interface MacroTransformerConfig {
    /** Enable verbose logging */
    verbose?: boolean;
    /** Custom macro module paths to load */
    macroModules?: string[];
}
/**
 * Create the TypeScript transformer factory
 * This is the entry point called by ts-patch
 */
declare function macroTransformerFactory(program: ts.Program, config?: MacroTransformerConfig): ts.TransformerFactory<ts.SourceFile>;
/**
 * The main transformer class that handles macro expansion
 */
declare class MacroTransformer {
    private ctx;
    private verbose;
    private additionalStatements;
    constructor(ctx: MacroContextImpl, verbose: boolean);
    /**
     * Visit a node and potentially transform it
     */
    visit(node: ts.Node): ts.Node | ts.Node[];
    /**
     * Try to transform a node if it's a macro invocation
     */
    private tryTransform;
    /**
     * Check if a node has decorators
     */
    private hasDecorators;
    /**
     * Try to expand an expression macro
     */
    private tryExpandExpressionMacro;
    /**
     * Try to expand attribute macros on a declaration
     */
    private tryExpandAttributeMacros;
    /**
     * Parse a decorator to extract macro name and arguments
     */
    private parseDecorator;
    /**
     * Expand @derive decorator
     */
    private expandDeriveDecorator;
    /**
     * Extract type information for derive macros
     */
    private extractTypeInfo;
    /**
     * Try to expand a tagged template expression
     */
    private tryExpandTaggedTemplate;
    /**
     * Try to expand a type macro (type-level macros like Add<3, 4>)
     */
    private tryExpandTypeMacro;
    /**
     * Create an expression that throws at runtime when a macro expansion fails.
     * This ensures failures are loud rather than silently producing broken output.
     */
    private createMacroErrorExpression;
    /**
     * Create a statement that throws at runtime when a macro expansion fails.
     */
    private createMacroErrorStatement;
    /**
     * Update a node with new decorators
     */
    private updateDecorators;
}

// @ts-ignore
export = macroTransformerFactory;
export { MacroTransformer, type MacroTransformerConfig };
